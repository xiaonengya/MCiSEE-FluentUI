name: Translation (Disabled)
run-name: Download Translations (Disabled)

on:
  # 已禁用：需要 Crowdin 访问权限
  # schedule:
  #   - cron: 10 16 * * *
  workflow_dispatch:  # 仅手动触发

jobs:
  info:
    runs-on: ubuntu-latest
    steps:
      - name: Info
        run: |
          echo "ℹ️  此翻译工作流已禁用"
          echo "🔑 需要配置 Crowdin 密钥："
          echo "   - CROWDIN_PROJECT_ID"
          echo "   - CROWDIN_PERSONAL_TOKEN" 
          echo "   - TOKEN (GitHub Token)"
          echo "📁 如需启用，请在仓库 Settings > Secrets 中配置密钥"
      - name: Handle files
        id: handle
        run: |
          sudo chmod -R ugo+rwX .
          sed -i ":a;N;s/^    '\([a-z][a-z]-[A-Z][A-Z]\|lzh\)',\?\n//g;ta" scripts/init.js
          for TF in $(ls -r locales); do
            if [[ $TF == *.json ]]; then
              if [[ $(sed -n '$=' locales/$TF) -ge 12 ]]; then
                TL=$(basename $TF .json)
                sed -i -e '2i\  "language": "'$TL'",\n  "data": {' -e 's/^}/  }/g' -e '$a}' locales/$TF
                sed -i "s/\/\/ Crowdin/\/\/ Crowdin\n    '$TL',/g" scripts/init.js
              else
                rm locales/$TF
              fi
            fi
          done
          MESSAGE='modify: translations
          
          [Auto] Update Translation Files'"
          (Time: `date +'%F %X %Z'`)"
          EOF=$(dd if=/dev/urandom bs=15 count=1 status=none | base64)  # To define the separator
          echo "message<<EOF"$'\n'"$MESSAGE"$'\n'EOF >> $GITHUB_OUTPUT  # For the multi-line output
      - name: Commit & Push
        uses: EndBug/add-and-commit@main
        with:
          default_author: github_actions
          message: ${{ steps.handle.outputs.message }}
  # 原始的 deploy 部分已移除，因为指向原作者服务器
  # 现在翻译更新后会自动触发 pages-deploy.yml 部署到 GitHub Pages
